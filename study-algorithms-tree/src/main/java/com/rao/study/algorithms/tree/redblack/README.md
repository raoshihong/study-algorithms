红黑树

avl树的性质决定了他的性能问题,因为avl树要求两颗子树相差高度最大为1，所以在插入删除操作时，会导致树的调整特别的频繁，而红黑树放弃了高度平衡，改为相对的平衡，要求

1.节点是红色或黑色。

2.根节点是黑色。

3.每个叶子节点都是黑色的空节点（NIL节点）。

4 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)

5.从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

这些约束强制了红黑树的关键性质: 从根到叶子的最长的可能路径不多于最短的可能路径的两倍长(原因就是红色节点不能连续两个出现,必须黑色隔开,黑色节点可以连续出现,所以可以整棵树都是黑色的,当整棵树都是黑色的时候,这棵树就是完全二叉树)。

最长的可能路径就是 红黑交叉，最短的可能路径就是全黑(红黑树在插入节点时,一般这个节点都是为红色)

        黑
       /  \
      红   黑
     / \
    黑  黑
   /
  黑
  

红黑树的平衡是通过两个操作来保证的,调整颜色和节点旋转
https://blog.csdn.net/yusimiao/article/details/97102312

## 红黑树的新增

`先新增,新增后节点后,再对整棵树进行自平衡`

红黑树的操作，插入操作跟普通的二叉树一致 ,插入完后,需要判断是否平衡(满足红黑树的几个限制条件),不平衡则需要通过调整颜色或者节点旋转来使树平衡

插入节点分以下情况几种情况(实际5种,因为左右对称)


1  1.如果当前插入的节点的父节点为空(即当前插入的节点为根节点),则直接将当前节点设置为黑色
   2.如果当前插入的节点的父节点不为空,则需要判断父节点的颜色
2      2.1 如果父节点为黑色,则直接插入的节点不用变更颜色
       2.2 如果父节点为红色,则需要叔叔节点来进行判断 (注:红黑树中的叶子节点为NIL节点,且颜色规定为黑色,判断叔叔节点之前需要先判断祖父节点是否存在,如果祖父节点不存在则直接返回父节点)
3          2.2.1 如果叔叔节点为红色(即叔叔节点不为空且颜色为红色),则将父节点和叔叔节点的颜色填充为黑色,当前插入节点的祖父节点的颜色填充为红色,将当前节点索引设置为祖父节点 （只有这块当前节点是会不断上升的,所以当前节点为root时退出循环）判断
           2.2.2 如果叔叔节点为黑色(注:这里的黑色包括叔叔节点存在且为黑色和叔叔节点不存在为nil,在红黑树中叶子节点为NIL节点,NIL节点为黑色),则需要判断当前节点的父节点的位置和当前插入节点的位置位置)
               2.2.2.1 如果当前插入的节点的父节点为其祖父节点的左节点
4                  2.2.2.1.1 如果当前插入的节点为其父节点的左节点,则需要进行LL型 ,右旋转,并交换当前插入节点的父节点和祖父节点的颜色,
5                  2.2.2.1.2 如果当前插入的节点为其父节点的右节点,则需要先对当前插入节点和父节点进行左旋,左旋后,再执行2.2.2.1.1的操作进行右旋
               2.2.2.2 如果当前插入的节点的父节点为其祖父节点的右节点
                   2.2.2.2.1 如果当前插入的节点为其父节点的右节点,则需要进行RR型 ,左旋转,并交换当前插入节点的父节点和祖父节点的颜色
                   2.2.2.2.2 如果当前插入的节点为其父节点的左节点,则需要先对当前插入节点和父节点进行右旋,右旋后,再执行2.2.2.2.1的操作进行左旋
                    



## 红黑树的删除

`先删除,删除节点后,对整棵树进行自平衡`

从替代节点进行自平衡处理,删除节点还是跟普通的二叉树一样

1.删除节点没有左右叶子节点,则直接删除
2.删除节点仅有一个子节点,则将子节点替代被删除的节点
3.删除节点有左右子节点,则需要采用(删除节点的右节点的最小子孙节点替代被删除的节点)或者(删除节点的左节点的最大子孙节点替代被删除的节点)


删除节点后,需要对整棵树进行自平衡，每次删除的时候，动的都是替代删除节点的那个节点，所以我们可以从替代节点出发,进行自平衡处理

首先对上面三种删除情况确定下替代节点是哪个
第一种情况，替代节点为删除节点自身
第二种情况，替代节点为删除节点的仅有的那个子节点
第三种情况，替代节点为找到的那个最小子孙节点或者最大子孙节点

删除节点后有以下几种情况需要判断
1.被删除的节点的颜色为红色,


自平衡操作有以下几种情况:
1.替代节点为红色,则将替代节点填充为黑色 即可
      15黑           
      /  \          
    7红   30红        
    /  \    \       
  3黑   10黑 45黑     
  /     /   /  \   
2红    8红 35红 50红                                                                                                                          
   
如上删除节点为5黑,那么替代节点为2红 ,那么将2红填充为黑色
                           10黑                  10黑                                                                          
                           / \                   / \                                                                                              
                         5黑 15黑               5黑 15黑                                                                                                     
                         /                                                                                                      
                        2红                                                                            
如上删除节点为2红,那么替代节点为2红,设置为黑色,并删除2黑                      

       10黑                             10黑                                                                                                                                                                 
       /  \                            /  \                                                                                                                                    
     5黑   15黑                       6黑   15黑                                                                                                  
     /  \    \                       /  \    \                                                                                                                             
   2红   7黑  20红                  2红   7黑  20红                                                                                                                            
   / \    / \   \                  / \     \   \                                                                                                                  
 1黑 4黑 6红 9红 25黑              1黑 4黑   9红 25黑                                                                                                               
    /                               /                                                                                                                                              
   3红                              3红                                                                                                                                  
 
如上,删除5黑,寻找5黑的右节点的最小子孙节点为6红,那么替代节点为6红, 那么删除5黑,将6红填充为黑色,并设置到5黑的位置

   
                  
    

              
  











































